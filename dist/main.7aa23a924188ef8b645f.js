(self.webpackChunkgeovis=self.webpackChunkgeovis||[]).push([[792],{2944:(e,n,t)=>{"use strict";t.d(n,{A:()=>r});var o=t(1601),a=t.n(o),i=t(6314),s=t.n(i)()(a());s.push([e.id,"html, body, #cesiumContainer {\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n}\n\n#buttonsContainer {\n    position: absolute;\n    top: 15px;\n    left: 15px;\n    z-index: 10;\n}\n\n#buttonsContainer button {\n    margin: 5px;\n    padding: 10px;\n    font-size: 16px;\n    background-color: rgba(255, 255, 255, 0.8); /* White background with 80% opacity */\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    opacity: 0.8; /* 80% opacity */\n    transition: opacity 0.3s; /* Smooth transition */\n    font-family: sans-serif;\n}\n\n#buttonsContainer button:hover {\n    opacity: 1; /* Fully opaque on hover */\n}\n#legend {\n    position: absolute;\n    top: 100px;\n    left: 20px;\n    background: rgba(255, 255, 255, 0.8);\n    padding: 10px;\n    border-radius: 5px;\n    z-index: 101;\n    text-align: center;\n    font-size: 16px;\n}\n\n#legend h3 {\n    margin: 0;\n    font-size: 16px;\n    font-family: sans-serif;\n}\n\n#colorBar {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 5px;\n}\n\n.color-box {\n    width: 50px;\n    height: 20px;\n}\n\n#labels {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 5px;\n    font-family: sans-serif;\n}\n\n#labels span {\n    font-size: 14px;\n}",""]);const r=s},8977:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>y});var o=t(5072),a=t.n(o),i=t(7825),s=t.n(i),r=t(7659),l=t.n(r),d=t(5056),c=t.n(d),p=t(540),m=t.n(p),u=t(1113),g=t.n(u),f=t(2944),h={};h.styleTagTransform=g(),h.setAttributes=c(),h.insert=l().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=m(),a()(f.A,h);const y=f.A&&f.A.locals?f.A.locals:void 0},44:(e,n,t)=>{var o=t(8886);t(8977),t(102),o.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwMTQwODE4NS03M2VhLTQ2NDgtOTEwNS1lYjVjMDQ0ZDlkN2QiLCJpZCI6MjE0MzU1LCJpYXQiOjE3MTYyNDYzNDN9.ZDtqZHXxyqetQHThLIPcfZhNPJNlVKoHg0uU4Q-e5TA";var a=new o.Viewer("cesiumContainer",{animation:!1,baseLayerPicker:!1,fullscreenButton:!0,homeButton:!0,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,scene3DOnly:!0,useDefaultRenderLoop:!0});function i(e){console.time("addPopulationLines");var n=Math.min(...e.map((e=>e.population))),t=Math.max(...e.map((e=>e.population)));e.forEach((function(e){var i=e.population/5e3,r=o.Cartesian3.fromDegrees(e.longitude,e.latitude),l=o.Cartesian3.fromDegrees(e.longitude,e.latitude,1e3*i),d=(e.population-n)/(t-n),c=o.Color.fromHsl(.66-.66*d,1,.5+.25*d),p=a.entities.add({name:e.name,polyline:{positions:[r,l],width:5,material:new o.ColorMaterialProperty(c)}});s.global.push(p)})),console.timeEnd("addPopulationLines")}o.IonImageryProvider.fromAssetId(3).then((e=>{a.imageryLayers.addImageryProvider(e)})),document.getElementById("loadingScreen").style.display="block";let s={global:[],usa:[],wa:[]};function r(e,n){console.time(`createHeatmapOverlay: ${n}`);const t=[o.Color.fromCssColorString("#FCD5D8"),o.Color.fromCssColorString("#F5A6A8"),o.Color.fromCssColorString("#F0837D"),o.Color.fromCssColorString("#F45352"),o.Color.fromCssColorString("#F12D18"),o.Color.fromCssColorString("#E01C06"),o.Color.fromCssColorString("#B11602")];e.features.forEach((e=>{var i=e.properties,r=i.heatmap_level-1,l=t[r],d=`heatmap-${i.NAME||i.name}`,c=function(e){return e.flat(1/0)}(e.geometry.coordinates);if(c.some((e=>"number"!=typeof e)))console.error("Invalid coordinates",c);else{var p=a.entities.add({id:d,name:i.NAME||i.name,polygon:{hierarchy:o.Cartesian3.fromDegreesArray(c),material:l.withAlpha(.6),outline:!0,outlineColor:o.Color.BLACK},label:{text:i.NAME||i.name,fillColor:o.Color.BLACK,verticalOrigin:o.VerticalOrigin.TOP,pixelOffset:new o.Cartesian2(0,-20)}});s[n].push(p)}})),console.timeEnd(`createHeatmapOverlay: ${n}`)}function l(e){switch(console.time("switchView"),console.time("hideAllEntities"),a.entities.suspendEvents(),a.entities.values.forEach((e=>{e.show=!1})),a.entities.resumeEvents(),console.timeEnd("hideAllEntities"),e){case"global":document.getElementById("legend").style.display="none",a.entities.suspendEvents(),s.global.forEach((e=>e.show=!0)),a.entities.resumeEvents(),a.camera.flyTo({destination:o.Cartesian3.fromDegrees(0,0,3e7),duration:1,orientation:{heading:o.Math.toRadians(0),pitch:o.Math.toRadians(-90),roll:0}});break;case"usa":document.getElementById("legend").style.display="block",a.entities.suspendEvents(),s.usa.forEach((e=>e.show=!0)),a.entities.resumeEvents(),a.camera.flyTo({destination:o.Cartesian3.fromDegrees(-99.1332,38.9637,5e6),duration:1,orientation:{heading:o.Math.toRadians(0),pitch:o.Math.toRadians(-90),roll:0}});break;case"wa":document.getElementById("legend").style.display="block",a.entities.suspendEvents(),s.wa.forEach((e=>e.show=!0)),a.entities.resumeEvents(),a.camera.flyTo({destination:o.Cartesian3.fromDegrees(-120.7401,47.7511,1e6),duration:1,orientation:{heading:o.Math.toRadians(0),pitch:o.Math.toRadians(-90),roll:0}})}console.timeEnd("switchView")}document.getElementById("globalPopulationBtn").addEventListener("click",(()=>l("global"))),document.getElementById("usaPopulationBtn").addEventListener("click",(()=>l("usa"))),document.getElementById("waPopulationBtn").addEventListener("click",(()=>l("wa"))),async function(){console.time("preloadData");const e=await async function(){const e=localStorage.getItem("cityPopData");if(e)return console.log("Using cached data"),JSON.parse(e);{const e=(await t.e(419).then(t.t.bind(t,8288,19))).default;return console.log("JSON data loaded:",e),localStorage.setItem("cityPopData",JSON.stringify(e)),e}}(),[n,o]=await Promise.all([fetch("data/states.geojson").then((e=>e.json())),fetch("data/wa_counties.geojson").then((e=>e.json()))]);return localStorage.setItem("stateGeoJson",JSON.stringify(n)),localStorage.setItem("waGeoJson",JSON.stringify(o)),await Promise.all([r(n,"usa"),r(o,"wa"),i(e)]),console.timeEnd("preloadData"),{populationData:e,stateGeoJson:n,waGeoJson:o}}().then((e=>{console.log("Preloaded Data:",e),document.getElementById("loadingScreen").style.display="none"})).catch((e=>{console.error("Error during preload:",e),document.getElementById("loadingScreen").style.display="none"}))}},e=>{e.O(0,[490,404,732,437,951,810,752,479,981,520,747,74,832,726,532,568,782,148,405,484,773,799],(()=>(44,e(e.s=44)))),e.O()}]);