(self.webpackChunkgeovis=self.webpackChunkgeovis||[]).push([[792],{2944:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(1601),a=n.n(o),i=n(6314),s=n.n(i)()(a());s.push([e.id,"html, body, #cesiumContainer {\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n}\n\n#buttonsContainer {\n    position: absolute;\n    top: 15px;\n    left: 15px;\n    z-index: 10;\n}\n\n#buttonsContainer button {\n    margin: 5px;\n    padding: 10px;\n    font-size: 25px;\n    background-color: rgba(255, 255, 255, 0.8); /* White background with 80% opacity */\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    opacity: 0.8; /* 80% opacity */\n    transition: opacity 0.3s; /* Smooth transition */\n    font-family: sans-serif;\n}\n\n#buttonsContainer button:hover {\n    opacity: 1; /* Fully opaque on hover */\n}\n#legend {\n    position: absolute;\n    top: 100px;\n    left: 20px;\n    background: rgba(255, 255, 255, 0.8);\n    padding: 10px;\n    border-radius: 5px;\n    z-index: 101;\n    text-align: center;\n    font-size: 25px;\n}\n\n#legend h3 {\n    margin: 0;\n    font-size: 25px;\n    font-family: sans-serif;\n}\n\n#colorBar {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 5px;\n}\n\n.color-box {\n    width: 70px;\n    height: 30px;\n}\n\n#labels {\n    display: flex;\n    justify-content: space-between;\n    margin-top: 5px;\n    font-family: sans-serif;\n}\n\n#labels span {\n    font-size: 16px;\n}",""]);const r=s},8977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var o=n(5072),a=n.n(o),i=n(7825),s=n.n(i),r=n(7659),l=n.n(r),p=n(5056),c=n.n(p),d=n(540),m=n.n(d),u=n(1113),g=n.n(u),h=n(2944),f={};f.styleTagTransform=g(),f.setAttributes=c(),f.insert=l().bind(null,"head"),f.domAPI=s(),f.insertStyleElement=m(),a()(h.A,f);const y=h.A&&h.A.locals?h.A.locals:void 0},44:(e,t,n)=>{var o=n(8886);n(8977),n(102),o.Ion.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiIwMTQwODE4NS03M2VhLTQ2NDgtOTEwNS1lYjVjMDQ0ZDlkN2QiLCJpZCI6MjE0MzU1LCJpYXQiOjE3MTYyNDYzNDN9.ZDtqZHXxyqetQHThLIPcfZhNPJNlVKoHg0uU4Q-e5TA";var a=new o.Viewer("cesiumContainer",{animation:!1,baseLayerPicker:!1,fullscreenButton:!0,homeButton:!0,infoBox:!1,sceneModePicker:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,scene3DOnly:!0,useDefaultRenderLoop:!0});o.IonImageryProvider.fromAssetId(3).then((e=>{a.imageryLayers.addImageryProvider(e)})),document.getElementById("loadingScreen").style.display="block";let i={global:[],usa:[],wa:[]};async function s(e,t,n,s,r){console.time(`createHeatmapOverlay: ${r}`);const l=[o.Color.fromCssColorString("#FCD5D8"),o.Color.fromCssColorString("#F5A6A8"),o.Color.fromCssColorString("#F0837D"),o.Color.fromCssColorString("#F45352"),o.Color.fromCssColorString("#F12D18"),o.Color.fromCssColorString("#F91E06"),o.Color.fromCssColorString("#DB1D02")];s.features.forEach((e=>{var t=e.properties,n=t.heatmap_level-1,s=l[n],p=`heatmap-${t.NAME||t.name}`,c=a.entities.getById(p);if(c)c.polygon.material=s.withAlpha(.6),c.show=!0,i[r].push(c);else try{var d=e.geometry.coordinates;if("Polygon"===e.geometry.type?d=d.flat(2):"MultiPolygon"===e.geometry.type&&(d=d.flat(3)),d.some((e=>"number"!=typeof e)))throw new Error("Invalid coordinates");var m=a.entities.add({id:p,name:t.NAME||t.name,polygon:{hierarchy:o.Cartesian3.fromDegreesArray(d),material:s.withAlpha(.6)}});i[r].push(m)}catch(e){console.error("Error creating entity:",e)}})),console.timeEnd(`createHeatmapOverlay: ${r}`)}function r(e){switch(console.time("switchView"),console.time("hideAllEntities"),a.entities.suspendEvents(),a.entities.values.forEach((e=>{e.show=!1})),a.entities.resumeEvents(),console.timeEnd("hideAllEntities"),e){case"global":a.entities.suspendEvents(),i.global.forEach((e=>e.show=!0)),a.entities.resumeEvents(),a.camera.flyTo({destination:o.Cartesian3.fromDegrees(0,0,3e7),duration:1,orientation:{heading:o.Math.toRadians(0),pitch:o.Math.toRadians(-90),roll:0}});break;case"usa":a.camera.flyTo({destination:o.Cartesian3.fromDegrees(-99.1332,38.9637,5e6),duration:1,complete:async()=>{const e=JSON.parse(localStorage.getItem("stateGeoJson")),t=JSON.parse(localStorage.getItem("stateData"));Math.min(...t.map((e=>e.population))),Math.max(...t.map((e=>e.population))),await s(0,0,0,e,"usa"),a.entities.suspendEvents(),i.usa.forEach((e=>e.show=!0)),a.entities.resumeEvents()},orientation:{heading:o.Math.toRadians(0),pitch:o.Math.toRadians(-90),roll:0}});break;case"wa":a.camera.flyTo({destination:o.Cartesian3.fromDegrees(-120.7401,47.7511,1e6),duration:1,complete:async()=>{const e=JSON.parse(localStorage.getItem("waGeoJson"));Math.min(...e.features.map((e=>e.properties.population))),Math.max(...e.features.map((e=>e.properties.population))),await s(e.features.map((e=>({name:e.properties.NAME,population:e.properties.population}))),0,0,e,"wa"),a.entities.suspendEvents(),i.wa.forEach((e=>e.show=!0)),a.entities.resumeEvents()},orientation:{heading:o.Math.toRadians(0),pitch:o.Math.toRadians(-90),roll:0}})}console.timeEnd("switchView")}document.getElementById("globalPopulationBtn").addEventListener("click",(()=>r("global"))),document.getElementById("usaPopulationBtn").addEventListener("click",(()=>r("usa"))),document.getElementById("waPopulationBtn").addEventListener("click",(()=>r("wa"))),async function(){console.time("preloadData");const e=await async function(){const e=localStorage.getItem("cityPopData");if(e)return console.log("Using cached data"),JSON.parse(e);{const e=(await n.e(419).then(n.t.bind(n,8288,19))).default;return console.log("JSON data loaded:",e),localStorage.setItem("cityPopData",JSON.stringify(e)),e}}(),t=await fetch("data/states.geojson").then((e=>e.json())),o=await fetch("data/wa_counties.geojson").then((e=>e.json())),a=t.features.map((e=>({name:e.properties.name,population:e.properties.population})));return localStorage.setItem("stateData",JSON.stringify(a)),localStorage.setItem("stateGeoJson",JSON.stringify(t)),localStorage.setItem("waGeoJson",JSON.stringify(o)),console.timeEnd("preloadData"),{populationData:e,stateData:a,stateGeoJson:t,waGeoJson:o}}().then((e=>{console.log("Preloaded Data:",e),function(e){console.time("addPopulationLines");var t=e.map((e=>e.population)),n=Math.min(...t),s=Math.max(...t);e.forEach((function(e){var t=e.population/5e3,r=o.Cartesian3.fromDegrees(e.longitude,e.latitude),l=o.Cartesian3.fromDegrees(e.longitude,e.latitude,1e3*t),p=(e.population-n)/(s-n),c=o.Color.fromHsl(.66-.66*p,1,.5+.25*p),d=a.entities.add({name:e.name,polyline:{positions:[r,l],width:5,material:new o.ColorMaterialProperty(c)}});i.global.push(d)})),console.timeEnd("addPopulationLines")}(e.populationData),document.getElementById("loadingScreen").style.display="none"})).catch((e=>{console.error("Error during preload:",e),document.getElementById("loadingScreen").style.display="none"}))}},e=>{e.O(0,[490,404,732,437,951,810,752,479,981,520,747,74,832,726,532,568,782,148,405,484,773,799],(()=>(44,e(e.s=44)))),e.O()}]);